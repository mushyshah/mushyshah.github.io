<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
    <title>
      TracFastCgi (diff) – Aquarius
    </title>
        <link rel="search" href="http://brown.caslab.queensu.ca/web/Aquarius/search" />
        <link rel="help" href="TracGuide" />
        <link rel="up" href="TracFastCgi@action=history" title="Page history" />
        <link rel="start" href="../wiki.1" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/css/diff.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/web/Aquarius/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/css/diff.css" /><meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://research.cs.queensu.ca/home/cisc320/"><img src="http://research.cs.queensu.ca/home/cisc320/Winter2014/cisc320.jpg" alt="(please configure the [header_logo] section in trac.ini)" height="50" /></a>
      </div>
      <form id="search" action="http://brown.caslab.queensu.ca/web/Aquarius/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login">Login</a></li><li><a href="../prefs">Preferences</a></li><li><a href="TracGuide">Help/Guide</a></li><li class="last"><a href="../about">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="last first active"><a href="../wiki.1">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span class="missing">&larr; Previous Change</span></li><li><a href="TracFastCgi@action=history" title="Page history">Wiki History</a></li><li class="last"><span class="missing">Next Change &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>Changes
        between
          <a href="http://brown.caslab.queensu.ca/web/Aquarius/wiki/TracFastCgi?version=0">Initial Version</a> and
        <a href="TracFastCgi@version=1">Version 1</a> of
        <a href="TracFastCgi@version=1">TracFastCgi</a>
      </h1>
      <form method="post" id="prefs" action="TracFastCgi@version=1"><div><input type="hidden" name="__FORM_TOKEN" value="ded2e27addbac7ad9541ebef" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="1" />
          <input type="hidden" name="old_version" value="0" />
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
          01/18/14 16:58:15 (<a class="timeline" href="http://brown.caslab.queensu.ca/web/Aquarius/timeline?from=2014-01-18T16%3A58%3A15-0500&amp;precision=second" title="2014-01-18T16:58:15-0500 in Timeline">4 months</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          trac
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
--
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="TracFastCgi@version=1">TracFastCgi</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version currently edited">
                    <a href="TracFastCgi@action=diff&amp;version=1#L1">
                      v1</a>
                  </th>
                  <th title="Version 1">
                    <a href="TracFastCgi@version=1#L1">
                      v1</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="add">
                  <tr class="first">
                          <th> </th><th>1</th><td class="r"><ins>= Trac with FastCGI =</ins> </td>
                  </tr><tr>
                          <th> </th><th>2</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>3</th><td class="r"><ins>[http://www.fastcgi.com/ FastCGI] interface allows Trac to remain resident much like with [wiki:TracModPython mod_python]. It is faster than external CGI interfaces which must start a new process for each request. However, unlike mod_python, FastCGI supports [http://httpd.apache.org/docs/suexec.html Apache SuEXEC], i.e. run with different permissions than web server. Additionally, it is supported by much wider variety of web servers.</ins> </td>
                  </tr><tr>
                          <th> </th><th>4</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>5</th><td class="r"><ins>'''Note for Windows:''' Trac's FastCGI does not run under Windows, as Windows does not implement `Socket.fromfd`, which is used by `_fcgi.py`. If you want to connect to IIS, you may want to try [trac:TracOnWindowsIisAjp AJP].</ins> </td>
                  </tr><tr>
                          <th> </th><th>6</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>7</th><td class="r"><ins>== Simple Apache configuration ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>8</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>9</th><td class="r"><ins>There are two FastCGI modules commonly available for Apache: `mod_fastcgi` and</ins> </td>
                  </tr><tr>
                          <th> </th><th>10</th><td class="r"><ins>`mod_fcgid` (preferred). The latter is more up-to-date.</ins> </td>
                  </tr><tr>
                          <th> </th><th>11</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>12</th><td class="r"><ins>==== setup with `mod_fastcgi` ====</ins> </td>
                  </tr><tr>
                          <th> </th><th>13</th><td class="r"><ins>`mod_fastcgi` uses `FastCgiIpcDir` and `FastCgiConfig` directives that should be added to an appropriate Apache configuration file:</ins> </td>
                  </tr><tr>
                          <th> </th><th>14</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>15</th><td class="r"><ins># Enable fastcgi for .fcgi files</ins> </td>
                  </tr><tr>
                          <th> </th><th>16</th><td class="r"><ins># (If you're using a distro package for mod_fcgi, something like</ins> </td>
                  </tr><tr>
                          <th> </th><th>17</th><td class="r"><ins># this is probably already present)</ins> </td>
                  </tr><tr>
                          <th> </th><th>18</th><td class="r"><ins>&lt;IfModule mod_fastcgi.c&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>19</th><td class="r"><ins>&nbsp; &nbsp;AddHandler fastcgi-script .fcgi</ins> </td>
                  </tr><tr>
                          <th> </th><th>20</th><td class="r"><ins>&nbsp; &nbsp;FastCgiIpcDir /var/lib/apache2/fastcgi </ins> </td>
                  </tr><tr>
                          <th> </th><th>21</th><td class="r"><ins>&lt;/IfModule&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>22</th><td class="r"><ins>LoadModule fastcgi_module /usr/lib/apache2/modules/mod_fastcgi.so</ins> </td>
                  </tr><tr>
                          <th> </th><th>23</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins>Setting `FastCgiIpcDir` is optional if the default is suitable. Note that the `LoadModule` line must be after the `IfModule` group.</ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins>Configure `ScriptAlias` or similar options as described in TracCgi, but</ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>calling `trac.fcgi` instead of `trac.cgi`.</ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>You can set up the `TRAC_ENV` as an overall default:</ins> </td>
                  </tr><tr>
                          <th> </th><th>30</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>31</th><td class="r"><ins>FastCgiConfig -initial-env TRAC_ENV=/path/to/env/trac</ins> </td>
                  </tr><tr>
                          <th> </th><th>32</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>33</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>34</th><td class="r"><ins>Or you can serve multiple Trac projects in a directory like:</ins> </td>
                  </tr><tr>
                          <th> </th><th>35</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>36</th><td class="r"><ins>FastCgiConfig -initial-env TRAC_ENV_PARENT_DIR=/parent/dir/of/projects</ins> </td>
                  </tr><tr>
                          <th> </th><th>37</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>38</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>39</th><td class="r"><ins>==== setup with `mod_fcgid` ====</ins> </td>
                  </tr><tr>
                          <th> </th><th>40</th><td class="r"><ins>Configure `ScriptAlias` (see TracCgi for details), but call `trac.fcgi`</ins> </td>
                  </tr><tr>
                          <th> </th><th>41</th><td class="r"><ins>instead of `trac.cgi`. Note that slash at the end - it is important.</ins> </td>
                  </tr><tr>
                          <th> </th><th>42</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>43</th><td class="r"><ins>ScriptAlias /trac /path/to/www/trac/cgi-bin/trac.fcgi/</ins> </td>
                  </tr><tr>
                          <th> </th><th>44</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>45</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>46</th><td class="r"><ins>To setup Trac environment for `mod_fcgid` it is necessary to use</ins> </td>
                  </tr><tr>
                          <th> </th><th>47</th><td class="r"><ins>`FCGIDDefaultInitEnv` directive. It cannot be used in `Directory` or</ins> </td>
                  </tr><tr>
                          <th> </th><th>48</th><td class="r"><ins>`Location` context, so if you need to support multiple projects, try</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>alternative environment setup below.</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>FCGIDDefaultInitEnv TRAC_ENV /path/to/env/trac/</ins> </td>
                  </tr><tr>
                          <th> </th><th>53</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>54</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>55</th><td class="r"><ins>==== alternative environment setup ====</ins> </td>
                  </tr><tr>
                          <th> </th><th>56</th><td class="r"><ins>A better method to specify path to Trac environment it to embed the path</ins> </td>
                  </tr><tr>
                          <th> </th><th>57</th><td class="r"><ins>into `trac.fcgi` script itself. That doesn't require configuration of server</ins> </td>
                  </tr><tr>
                          <th> </th><th>58</th><td class="r"><ins>environment variables, works for both FastCgi modules</ins> </td>
                  </tr><tr>
                          <th> </th><th>59</th><td class="r"><ins>(and for [http://www.lighttpd.net/ lighttpd] and CGI as well):</ins> </td>
                  </tr><tr>
                          <th> </th><th>60</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>61</th><td class="r"><ins>import os</ins> </td>
                  </tr><tr>
                          <th> </th><th>62</th><td class="r"><ins>os.environ['TRAC_ENV'] = "/path/to/projectenv"</ins> </td>
                  </tr><tr>
                          <th> </th><th>63</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>64</th><td class="r"><ins>or</ins> </td>
                  </tr><tr>
                          <th> </th><th>65</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>66</th><td class="r"><ins>import os</ins> </td>
                  </tr><tr>
                          <th> </th><th>67</th><td class="r"><ins>os.environ['TRAC_ENV_PARENT_DIR'] = "/path/to/project/parent/dir"</ins> </td>
                  </tr><tr>
                          <th> </th><th>68</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>69</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>70</th><td class="r"><ins>With this method different projects can be supported by using different</ins> </td>
                  </tr><tr>
                          <th> </th><th>71</th><td class="r"><ins>`.fcgi` scripts with different `ScriptAliases`.</ins> </td>
                  </tr><tr>
                          <th> </th><th>72</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>73</th><td class="r"><ins>See [https://coderanger.net/~coderanger/httpd/fcgi_example.conf this fcgid example config] which uses a !ScriptAlias directive with trac.fcgi with a trailing / like this:</ins> </td>
                  </tr><tr>
                          <th> </th><th>74</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>75</th><td class="r"><ins>ScriptAlias / /srv/tracsite/cgi-bin/trac.fcgi/</ins> </td>
                  </tr><tr>
                          <th> </th><th>76</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>77</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>78</th><td class="r"><ins>== Simple Cherokee Configuration ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>79</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>80</th><td class="r"><ins>The configuration on Cherokee's side is quite simple. You will only need to know that you can spawn Trac as an SCGI process.</ins> </td>
                  </tr><tr>
                          <th> </th><th>81</th><td class="r"><ins>You can either start it manually, or better yet, automatically by letting Cherokee spawn the server whenever it is down.</ins> </td>
                  </tr><tr>
                          <th> </th><th>82</th><td class="r"><ins>First set up an information source in cherokee-admin with a local interpreter.</ins> </td>
                  </tr><tr>
                          <th> </th><th>83</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>84</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>85</th><td class="r"><ins>Host:</ins> </td>
                  </tr><tr>
                          <th> </th><th>86</th><td class="r"><ins>localhost:4433</ins> </td>
                  </tr><tr>
                          <th> </th><th>87</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>88</th><td class="r"><ins>Interpreter:</ins> </td>
                  </tr><tr>
                          <th> </th><th>89</th><td class="r"><ins>/usr/bin/tracd —single-env —daemonize —protocol=scgi —hostname=localhost —port=4433 /path/to/project/</ins> </td>
                  </tr><tr>
                          <th> </th><th>90</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>91</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>92</th><td class="r"><ins>If the port was not reachable, the interpreter command would be launched. Note that, in the definition of the information source, you will have to manually launch the spawner if you use a ''Remote host'' as ''Information source'' instead of a ''Local interpreter''.</ins> </td>
                  </tr><tr>
                          <th> </th><th>93</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>94</th><td class="r"><ins>After doing this, we will just have to create a new rule managed by the SCGI handler to access Trac. It can be created in a new virtual server, trac.example.net for instance, and will only need two rules. The '''default''' one will use the SCGI handler associated to the previously created information source.</ins> </td>
                  </tr><tr>
                          <th> </th><th>95</th><td class="r"><ins>The second rule will be there to serve the few static files needed to correctly display the Trac interface. Create it as ''Directory rule'' for ''/chrome/common'' and just set it to the ''Static files'' handler and with a ''Document root'' that points to the appropriate files: ''/usr/share/trac/htdocs/''</ins> </td>
                  </tr><tr>
                          <th> </th><th>96</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>97</th><td class="r"><ins>== Simple Lighttpd Configuration ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>98</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>99</th><td class="r"><ins>The FastCGI front-end was developed primarily for use with alternative webservers, such as [http://www.lighttpd.net/ lighttpd].</ins> </td>
                  </tr><tr>
                          <th> </th><th>100</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>101</th><td class="r"><ins>lighttpd is a secure, fast, compliant and very flexible web-server that has been optimized for high-performance</ins> </td>
                  </tr><tr>
                          <th> </th><th>102</th><td class="r"><ins>environments.&nbsp; It has a very low memory footprint compared to other web servers and takes care of CPU load.</ins> </td>
                  </tr><tr>
                          <th> </th><th>103</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>104</th><td class="r"><ins>For using `trac.fcgi`(prior to 0.11) / fcgi_frontend.py (0.11) with lighttpd add the following to your lighttpd.conf:</ins> </td>
                  </tr><tr>
                          <th> </th><th>105</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>106</th><td class="r"><ins>#var.fcgi_binary="/usr/bin/python /path/to/fcgi_frontend.py" # 0.11 if installed with easy_setup, it is inside the egg directory</ins> </td>
                  </tr><tr>
                          <th> </th><th>107</th><td class="r"><ins>var.fcgi_binary="/path/to/cgi-bin/trac.fcgi" # 0.10 name of prior fcgi executable</ins> </td>
                  </tr><tr>
                          <th> </th><th>108</th><td class="r"><ins>fastcgi.server = ("/trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>109</th><td class="r"><ins>&nbsp; &nbsp;</ins> </td>
                  </tr><tr>
                          <th> </th><th>110</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>111</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>112</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>113</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>114</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("TRAC_ENV" =&gt; "/path/to/projenv")</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>119</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>120</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>121</th><td class="r"><ins>Note that you will need to add a new entry to `fastcgi.server` for each separate Trac instance that you wish to run. Alternatively, you may use the `TRAC_ENV_PARENT_DIR` variable instead of `TRAC_ENV` as described above,</ins> </td>
                  </tr><tr>
                          <th> </th><th>122</th><td class="r"><ins>and you may set one of the two in `trac.fcgi` instead of in `lighttpd.conf`</ins> </td>
                  </tr><tr>
                          <th> </th><th>123</th><td class="r"><ins>using `bin-environment` (as in the section above on Apache configuration).</ins> </td>
                  </tr><tr>
                          <th> </th><th>124</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>125</th><td class="r"><ins>For using two projects with lighttpd add the following to your `lighttpd.conf`:</ins> </td>
                  </tr><tr>
                          <th> </th><th>126</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>127</th><td class="r"><ins>fastcgi.server = ("/first" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>128</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("first" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>129</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("socket" =&gt; "/tmp/trac-fastcgi-first.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>130</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>131</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>132</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>133</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("TRAC_ENV" =&gt; "/path/to/projenv-first")</ins> </td>
                  </tr><tr>
                          <th> </th><th>134</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>135</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),</ins> </td>
                  </tr><tr>
                          <th> </th><th>136</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/second" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>137</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("second" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>138</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("socket" =&gt; "/tmp/trac-fastcgi-second.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>139</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>140</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>141</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>142</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("TRAC_ENV" =&gt; "/path/to/projenv-second")</ins> </td>
                  </tr><tr>
                          <th> </th><th>143</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>144</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>145</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>146</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>147</th><td class="r"><ins>Note that field values are different.&nbsp; If you prefer setting the environment</ins> </td>
                  </tr><tr>
                          <th> </th><th>148</th><td class="r"><ins>variables in the `.fcgi` scripts, then copy/rename `trac.fcgi`, e.g., to</ins> </td>
                  </tr><tr>
                          <th> </th><th>149</th><td class="r"><ins>`first.fcgi` and `second.fcgi`, and reference them in the above settings.</ins> </td>
                  </tr><tr>
                          <th> </th><th>150</th><td class="r"><ins>Note that the above will result in different processes in any event, even</ins> </td>
                  </tr><tr>
                          <th> </th><th>151</th><td class="r"><ins>if both are running from the same `trac.fcgi` script.</ins> </td>
                  </tr><tr>
                          <th> </th><th>152</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>153</th><td class="r"><ins>#!div class=important</ins> </td>
                  </tr><tr>
                          <th> </th><th>154</th><td class="r"><ins>'''Note''' It's very important the order on which server.modules are loaded, if mod_auth is not loaded '''BEFORE''' mod_fastcgi, then the server will fail to authenticate the user.</ins> </td>
                  </tr><tr>
                          <th> </th><th>155</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>156</th><td class="r"><ins>For authentication you should enable mod_auth in lighttpd.conf 'server.modules', select auth.backend and auth rules:</ins> </td>
                  </tr><tr>
                          <th> </th><th>157</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>158</th><td class="r"><ins>server.modules&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = (</ins> </td>
                  </tr><tr>
                          <th> </th><th>159</th><td class="r"><ins>...</ins> </td>
                  </tr><tr>
                          <th> </th><th>160</th><td class="r"><ins>&nbsp; "mod_auth",</ins> </td>
                  </tr><tr>
                          <th> </th><th>161</th><td class="r"><ins>...</ins> </td>
                  </tr><tr>
                          <th> </th><th>162</th><td class="r"><ins>)</ins> </td>
                  </tr><tr>
                          <th> </th><th>163</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>164</th><td class="r"><ins>auth.backend&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= "htpasswd"</ins> </td>
                  </tr><tr>
                          <th> </th><th>165</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>166</th><td class="r"><ins># Separated password files for each project</ins> </td>
                  </tr><tr>
                          <th> </th><th>167</th><td class="r"><ins># See "Conditional Configuration" in</ins> </td>
                  </tr><tr>
                          <th> </th><th>168</th><td class="r"><ins># http://trac.lighttpd.net/trac/file/branches/lighttpd-merge-1.4.x/doc/configuration.txt</ins> </td>
                  </tr><tr>
                          <th> </th><th>169</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>170</th><td class="r"><ins>$HTTP["url"] =~ "^/first/" {</ins> </td>
                  </tr><tr>
                          <th> </th><th>171</th><td class="r"><ins>&nbsp; auth.backend.htpasswd.userfile = "/path/to/projenv-first/htpasswd.htaccess"</ins> </td>
                  </tr><tr>
                          <th> </th><th>172</th><td class="r"><ins>}</ins> </td>
                  </tr><tr>
                          <th> </th><th>173</th><td class="r"><ins>$HTTP["url"] =~ "^/second/" {</ins> </td>
                  </tr><tr>
                          <th> </th><th>174</th><td class="r"><ins>&nbsp; auth.backend.htpasswd.userfile = "/path/to/projenv-second/htpasswd.htaccess"</ins> </td>
                  </tr><tr>
                          <th> </th><th>175</th><td class="r"><ins>}</ins> </td>
                  </tr><tr>
                          <th> </th><th>176</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>177</th><td class="r"><ins># Enable auth on trac URLs, see</ins> </td>
                  </tr><tr>
                          <th> </th><th>178</th><td class="r"><ins># http://trac.lighttpd.net/trac/file/branches/lighttpd-merge-1.4.x/doc/authentication.txt</ins> </td>
                  </tr><tr>
                          <th> </th><th>179</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>180</th><td class="r"><ins>auth.require = ("/first/login" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>181</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("method"&nbsp; =&gt; "basic",</ins> </td>
                  </tr><tr>
                          <th> </th><th>182</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"realm"&nbsp; &nbsp;=&gt; "First project",</ins> </td>
                  </tr><tr>
                          <th> </th><th>183</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"require" =&gt; "valid-user"</ins> </td>
                  </tr><tr>
                          <th> </th><th>184</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),</ins> </td>
                  </tr><tr>
                          <th> </th><th>185</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/second/login" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>186</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("method"&nbsp; =&gt; "basic",</ins> </td>
                  </tr><tr>
                          <th> </th><th>187</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"realm"&nbsp; &nbsp;=&gt; "Second project",</ins> </td>
                  </tr><tr>
                          <th> </th><th>188</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"require" =&gt; "valid-user"</ins> </td>
                  </tr><tr>
                          <th> </th><th>189</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>190</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>191</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>192</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>193</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>194</th><td class="r"><ins>Note that lighttpd (I use version 1.4.3) stopped if password file doesn't exist.</ins> </td>
                  </tr><tr>
                          <th> </th><th>195</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>196</th><td class="r"><ins>Note that lighttpd doesn't support 'valid-user' in versions prior to 1.3.16.</ins> </td>
                  </tr><tr>
                          <th> </th><th>197</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>198</th><td class="r"><ins>Conditional configuration is also useful for mapping static resources, i.e. serving out images and CSS directly instead of through FastCGI:</ins> </td>
                  </tr><tr>
                          <th> </th><th>199</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>200</th><td class="r"><ins># Aliasing functionality is needed</ins> </td>
                  </tr><tr>
                          <th> </th><th>201</th><td class="r"><ins>server.modules += ("mod_alias")</ins> </td>
                  </tr><tr>
                          <th> </th><th>202</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>203</th><td class="r"><ins># Setup an alias for the static resources</ins> </td>
                  </tr><tr>
                          <th> </th><th>204</th><td class="r"><ins>alias.url = ("/trac/chrome/common" =&gt; "/usr/share/trac/htdocs")</ins> </td>
                  </tr><tr>
                          <th> </th><th>205</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>206</th><td class="r"><ins># Use negative lookahead, matching all requests that ask for any resource under /trac, EXCEPT in</ins> </td>
                  </tr><tr>
                          <th> </th><th>207</th><td class="r"><ins># /trac/chrome/common, and use FastCGI for those</ins> </td>
                  </tr><tr>
                          <th> </th><th>208</th><td class="r"><ins>$HTTP["url"] =~ "^/trac(?!/chrome/common)" {</ins> </td>
                  </tr><tr>
                          <th> </th><th>209</th><td class="r"><ins># Even if you have other fastcgi.server declarations for applications other than Trac, do NOT use += here</ins> </td>
                  </tr><tr>
                          <th> </th><th>210</th><td class="r"><ins>fastcgi.server = ("/trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>211</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>212</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>213</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>214</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>215</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>216</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("TRAC_ENV" =&gt; "/path/to/projenv")</ins> </td>
                  </tr><tr>
                          <th> </th><th>217</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>218</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>219</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>220</th><td class="r"><ins>}</ins> </td>
                  </tr><tr>
                          <th> </th><th>221</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>222</th><td class="r"><ins>The technique can be easily adapted for use with multiple projects by creating aliases for each of them, and wrapping the fastcgi.server declarations inside conditional configuration blocks.</ins> </td>
                  </tr><tr>
                          <th> </th><th>223</th><td class="r"><ins>Also there is another way to handle multiple projects and it's to use TRAC_ENV_PARENT_DIR instead of TRAC_ENV and use global auth, let's see an example:</ins> </td>
                  </tr><tr>
                          <th> </th><th>224</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>225</th><td class="r"><ins>#&nbsp; This is for handling multiple projects</ins> </td>
                  </tr><tr>
                          <th> </th><th>226</th><td class="r"><ins>&nbsp; alias.url&nbsp; &nbsp; &nbsp; &nbsp;= ( "/trac/" =&gt; "/path/to/trac/htdocs/" )</ins> </td>
                  </tr><tr>
                          <th> </th><th>227</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>228</th><td class="r"><ins>&nbsp; fastcgi.server += ("/projects"&nbsp; =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>229</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>230</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</ins> </td>
                  </tr><tr>
                          <th> </th><th>231</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "socket" =&gt; "/tmp/trac.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>232</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>233</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>234</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>235</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("TRAC_ENV_PARENT_DIR" =&gt; "/path/to/parent/dir/of/projects/" )</ins> </td>
                  </tr><tr>
                          <th> </th><th>236</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>237</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>238</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</ins> </td>
                  </tr><tr>
                          <th> </th><th>239</th><td class="r"><ins>#And here starts the global auth configuration</ins> </td>
                  </tr><tr>
                          <th> </th><th>240</th><td class="r"><ins>&nbsp; auth.backend = "htpasswd"</ins> </td>
                  </tr><tr>
                          <th> </th><th>241</th><td class="r"><ins>&nbsp; auth.backend.htpasswd.userfile = "/path/to/unique/htpassword/file/trac.htpasswd"</ins> </td>
                  </tr><tr>
                          <th> </th><th>242</th><td class="r"><ins>&nbsp; $HTTP["url"] =~ "^/projects/.*/login$" {</ins> </td>
                  </tr><tr>
                          <th> </th><th>243</th><td class="r"><ins>&nbsp; &nbsp; auth.require = ("/" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>244</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(</ins> </td>
                  </tr><tr>
                          <th> </th><th>245</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"method"&nbsp; =&gt; "basic",</ins> </td>
                  </tr><tr>
                          <th> </th><th>246</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"realm"&nbsp; &nbsp;=&gt; "trac",</ins> </td>
                  </tr><tr>
                          <th> </th><th>247</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"require" =&gt; "valid-user"</ins> </td>
                  </tr><tr>
                          <th> </th><th>248</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>249</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>250</th><td class="r"><ins>&nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>251</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>252</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>253</th><td class="r"><ins>Changing date/time format also supported by lighttpd over environment variable LC_TIME</ins> </td>
                  </tr><tr>
                          <th> </th><th>254</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>255</th><td class="r"><ins>fastcgi.server = ("/trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>256</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("trac" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>257</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;("socket" =&gt; "/tmp/trac-fastcgi.sock",</ins> </td>
                  </tr><tr>
                          <th> </th><th>258</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-path" =&gt; fcgi_binary,</ins> </td>
                  </tr><tr>
                          <th> </th><th>259</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "check-local" =&gt; "disable",</ins> </td>
                  </tr><tr>
                          <th> </th><th>260</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "bin-environment" =&gt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>261</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ("TRAC_ENV" =&gt; "/path/to/projenv",</ins> </td>
                  </tr><tr>
                          <th> </th><th>262</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "LC_TIME" =&gt; "ru_RU")</ins> </td>
                  </tr><tr>
                          <th> </th><th>263</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>264</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>265</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)</ins> </td>
                  </tr><tr>
                          <th> </th><th>266</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>267</th><td class="r"><ins>For details about languages specification see [trac:TracFaq TracFaq] question 2.13.</ins> </td>
                  </tr><tr>
                          <th> </th><th>268</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>269</th><td class="r"><ins>Other important information like [http://trac.lighttpd.net/trac/wiki/TracInstall this updated TracInstall page], [wiki:TracCgi#MappingStaticResources and this] are useful for non-fastcgi specific installation aspects.</ins> </td>
                  </tr><tr>
                          <th> </th><th>270</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>271</th><td class="r"><ins>If you use trac-0.9, read [http://lists.edgewall.com/archive/trac/2005-November/005311.html about small bug]</ins> </td>
                  </tr><tr>
                          <th> </th><th>272</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>273</th><td class="r"><ins>Relaunch lighttpd, and browse to `http://yourhost.example.org/trac` to access Trac.</ins> </td>
                  </tr><tr>
                          <th> </th><th>274</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>275</th><td class="r"><ins>Note about running lighttpd with reduced permissions:</ins> </td>
                  </tr><tr>
                          <th> </th><th>276</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>277</th><td class="r"><ins>&nbsp; If nothing else helps and trac.fcgi doesn't start with lighttpd settings __server.username = "www-data"__, __server.groupname = "www-data"__, then in the `bin-environment` section set `PYTHON_EGG_CACHE` to the home directory of `www-data` or some other directory accessible to this account for writing.</ins> </td>
                  </tr><tr>
                          <th> </th><th>278</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>279</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>280</th><td class="r"><ins>== Simple !LiteSpeed Configuration ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>281</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>282</th><td class="r"><ins>The FastCGI front-end was developed primarily for use with alternative webservers, such as [http://www.litespeedtech.com/ LiteSpeed].</ins> </td>
                  </tr><tr>
                          <th> </th><th>283</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>284</th><td class="r"><ins>!LiteSpeed web server is an event-driven asynchronous Apache replacement designed from the ground-up to be secure, scalable, and operate with minimal resources. !LiteSpeed can operate directly from an Apache config file and is targeted for business-critical environments.</ins> </td>
                  </tr><tr>
                          <th> </th><th>285</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>286</th><td class="r"><ins>Setup</ins> </td>
                  </tr><tr>
                          <th> </th><th>287</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>288</th><td class="r"><ins>1) Please make sure you have first have a working install of a Trac project. Test install with “tracd” first.</ins> </td>
                  </tr><tr>
                          <th> </th><th>289</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>290</th><td class="r"><ins>2) Create a Virtual Host for this setup. From now on we will refer to this vhost as TracVhost. For this tutorial we will be assuming that your trac project will be accessible via:</ins> </td>
                  </tr><tr>
                          <th> </th><th>291</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>292</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>293</th><td class="r"><ins>http://yourdomain.com/trac/</ins> </td>
                  </tr><tr>
                          <th> </th><th>294</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>295</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>296</th><td class="r"><ins>3) Go “TracVhost → External Apps” tab and create a new “External Application”.</ins> </td>
                  </tr><tr>
                          <th> </th><th>297</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>298</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>299</th><td class="r"><ins>Name: MyTracFCGI&nbsp; &nbsp; &nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>300</th><td class="r"><ins>Address: uds://tmp/lshttpd/mytracfcgi.sock</ins> </td>
                  </tr><tr>
                          <th> </th><th>301</th><td class="r"><ins>Max Connections: 10</ins> </td>
                  </tr><tr>
                          <th> </th><th>302</th><td class="r"><ins>Environment: TRAC_ENV=/fullpathto/mytracproject/ &lt;--- path to root folder of trac project</ins> </td>
                  </tr><tr>
                          <th> </th><th>303</th><td class="r"><ins>Initial Request Timeout (secs): 30</ins> </td>
                  </tr><tr>
                          <th> </th><th>304</th><td class="r"><ins>Retry Timeout (secs): 0</ins> </td>
                  </tr><tr>
                          <th> </th><th>305</th><td class="r"><ins>Persistent Connection&nbsp; &nbsp;Yes</ins> </td>
                  </tr><tr>
                          <th> </th><th>306</th><td class="r"><ins>Connection Keepalive Timeout: 30</ins> </td>
                  </tr><tr>
                          <th> </th><th>307</th><td class="r"><ins>Response Bufferring: No </ins> </td>
                  </tr><tr>
                          <th> </th><th>308</th><td class="r"><ins>Auto Start: Yes</ins> </td>
                  </tr><tr>
                          <th> </th><th>309</th><td class="r"><ins>Command: /usr/share/trac/cgi-bin/trac.fcgi&nbsp; &lt;--- path to trac.fcgi</ins> </td>
                  </tr><tr>
                          <th> </th><th>310</th><td class="r"><ins>Back Log: 50</ins> </td>
                  </tr><tr>
                          <th> </th><th>311</th><td class="r"><ins>Instances: 10</ins> </td>
                  </tr><tr>
                          <th> </th><th>312</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>313</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>314</th><td class="r"><ins>4) Optional. If you need to use htpasswd based authentication. Go to “TracVhost → Security” tab and create a new security “Realm”.</ins> </td>
                  </tr><tr>
                          <th> </th><th>315</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>316</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>317</th><td class="r"><ins>DB Type: Password File</ins> </td>
                  </tr><tr>
                          <th> </th><th>318</th><td class="r"><ins>Realm Name: MyTracUserDB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;--- any name you wish and referenced later</ins> </td>
                  </tr><tr>
                          <th> </th><th>319</th><td class="r"><ins>User DB Location: /fullpathto/htpasswd &lt;--- path to your htpasswd file</ins> </td>
                  </tr><tr>
                          <th> </th><th>320</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>321</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>322</th><td class="r"><ins>If you don’t have a htpasswd file or don’t know how to create the entries within one, go to http://sherylcanter.com/encrypt.php, to generate the user:password combos.</ins> </td>
                  </tr><tr>
                          <th> </th><th>323</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>324</th><td class="r"><ins>5) Go to “PythonVhost → Contexts” and create a new “FCGI Context”.</ins> </td>
                  </tr><tr>
                          <th> </th><th>325</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>326</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>327</th><td class="r"><ins>URI: /trac/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;--- URI path to bind to python fcgi app we created&nbsp; &nbsp; </ins> </td>
                  </tr><tr>
                          <th> </th><th>328</th><td class="r"><ins>Fast CGI App: [VHost Level] MyTractFCGI&nbsp; &lt;--- select the trac fcgi extapp we just created</ins> </td>
                  </tr><tr>
                          <th> </th><th>329</th><td class="r"><ins>Realm: TracUserDB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;--- only if (4) is set. select realm created in (4)</ins> </td>
                  </tr><tr>
                          <th> </th><th>330</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>331</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>332</th><td class="r"><ins>6) Modify /fullpathto/mytracproject/conf/trac.ini</ins> </td>
                  </tr><tr>
                          <th> </th><th>333</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>334</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>335</th><td class="r"><ins>#find/set base_rul, url, and link variables</ins> </td>
                  </tr><tr>
                          <th> </th><th>336</th><td class="r"><ins>base_url = http://yourdomain.com/trac/ &lt;--- base url to generate correct links to</ins> </td>
                  </tr><tr>
                          <th> </th><th>337</th><td class="r"><ins>url = http://yourdomain.com/trac/&nbsp; &nbsp; &nbsp; &lt;--- link of project</ins> </td>
                  </tr><tr>
                          <th> </th><th>338</th><td class="r"><ins>link = http://yourdomain.com/trac/&nbsp; &nbsp; &nbsp;&lt;--- link of graphic logo</ins> </td>
                  </tr><tr>
                          <th> </th><th>339</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>340</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>341</th><td class="r"><ins>7) Restart !LiteSpeed, “lswsctrl restart”, and access your new Trac project at: </ins> </td>
                  </tr><tr>
                          <th> </th><th>342</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>343</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>344</th><td class="r"><ins>http://yourdomain.com/trac/</ins> </td>
                  </tr><tr>
                          <th> </th><th>345</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>346</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>347</th><td class="r"><ins>=== Simple Nginx Configuration ===</ins> </td>
                  </tr><tr>
                          <th> </th><th>348</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>349</th><td class="r"><ins>1) Nginx configuration snippet - confirmed to work on 0.6.32</ins> </td>
                  </tr><tr>
                          <th> </th><th>350</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>351</th><td class="r"><ins>&nbsp; &nbsp; server {</ins> </td>
                  </tr><tr>
                          <th> </th><th>352</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; listen&nbsp; &nbsp; &nbsp; &nbsp;10.9.8.7:443;</ins> </td>
                  </tr><tr>
                          <th> </th><th>353</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; server_name&nbsp; trac.example;</ins> </td>
                  </tr><tr>
                          <th> </th><th>354</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>355</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>356</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_certificate&nbsp; &nbsp; &nbsp; /etc/ssl/trac.example.crt;</ins> </td>
                  </tr><tr>
                          <th> </th><th>357</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_certificate_key&nbsp; /etc/ssl/trac.example.key;</ins> </td>
                  </tr><tr>
                          <th> </th><th>358</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>359</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_session_timeout&nbsp; 5m;</ins> </td>
                  </tr><tr>
                          <th> </th><th>360</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>361</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_protocols&nbsp; SSLv2 SSLv3 TLSv1;</ins> </td>
                  </tr><tr>
                          <th> </th><th>362</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_ciphers&nbsp; ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</ins> </td>
                  </tr><tr>
                          <th> </th><th>363</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; ssl_prefer_server_ciphers&nbsp; &nbsp;on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>364</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>365</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # (Or ``^/some/prefix/(.*)``.</ins> </td>
                  </tr><tr>
                          <th> </th><th>366</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; if ($uri ~ ^/(.*)) {</ins> </td>
                  </tr><tr>
                          <th> </th><th>367</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;set $path_info /$1;</ins> </td>
                  </tr><tr>
                          <th> </th><th>368</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>369</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>370</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # You can copy this whole location to ``location [/some/prefix]/login``</ins> </td>
                  </tr><tr>
                          <th> </th><th>371</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # and remove the auth entries below if you want Trac to enforce</ins> </td>
                  </tr><tr>
                          <th> </th><th>372</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # authorization where appropriate instead of needing to authenticate</ins> </td>
                  </tr><tr>
                          <th> </th><th>373</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # for accessing the whole site.</ins> </td>
                  </tr><tr>
                          <th> </th><th>374</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; # (Or ``location /some/prefix``.)</ins> </td>
                  </tr><tr>
                          <th> </th><th>375</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; location / {</ins> </td>
                  </tr><tr>
                          <th> </th><th>376</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; auth_basic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "trac realm";</ins> </td>
                  </tr><tr>
                          <th> </th><th>377</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; auth_basic_user_file /home/trac/htpasswd;</ins> </td>
                  </tr><tr>
                          <th> </th><th>378</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>379</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # socket address</ins> </td>
                  </tr><tr>
                          <th> </th><th>380</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_pass&nbsp; &nbsp;unix:/home/trac/run/instance.sock;</ins> </td>
                  </tr><tr>
                          <th> </th><th>381</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>382</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # python - wsgi specific</ins> </td>
                  </tr><tr>
                          <th> </th><th>383</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param HTTPS on;</ins> </td>
                  </tr><tr>
                          <th> </th><th>384</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>385</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## WSGI REQUIRED VARIABLES</ins> </td>
                  </tr><tr>
                          <th> </th><th>386</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # WSGI application name - trac instance prefix.</ins> </td>
                  </tr><tr>
                          <th> </th><th>387</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (Or ``fastcgi_param&nbsp; SCRIPT_NAME&nbsp; /some/prefix``.)</ins> </td>
                  </tr><tr>
                          <th> </th><th>388</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SCRIPT_NAME&nbsp; &nbsp; &nbsp; &nbsp; "";</ins> </td>
                  </tr><tr>
                          <th> </th><th>389</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; PATH_INFO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $path_info;</ins> </td>
                  </tr><tr>
                          <th> </th><th>390</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>391</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ## WSGI NEEDED VARIABLES - trac warns about them</ins> </td>
                  </tr><tr>
                          <th> </th><th>392</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; REQUEST_METHOD&nbsp; &nbsp; &nbsp;$request_method;</ins> </td>
                  </tr><tr>
                          <th> </th><th>393</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_NAME&nbsp; &nbsp; &nbsp; &nbsp; $server_name;</ins> </td>
                  </tr><tr>
                          <th> </th><th>394</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_PORT&nbsp; &nbsp; &nbsp; &nbsp; $server_port;</ins> </td>
                  </tr><tr>
                          <th> </th><th>395</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; SERVER_PROTOCOL&nbsp; &nbsp; $server_protocol;</ins> </td>
                  </tr><tr>
                          <th> </th><th>396</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>397</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # for authentication to work</ins> </td>
                  </tr><tr>
                          <th> </th><th>398</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; AUTH_USER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $remote_user;</ins> </td>
                  </tr><tr>
                          <th> </th><th>399</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fastcgi_param&nbsp; REMOTE_USER&nbsp; &nbsp; &nbsp; &nbsp; $remote_user;</ins> </td>
                  </tr><tr>
                          <th> </th><th>400</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>401</th><td class="r"><ins>&nbsp; &nbsp; }</ins> </td>
                  </tr><tr>
                          <th> </th><th>402</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>403</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>404</th><td class="r"><ins>2) Modified trac.fcgi:</ins> </td>
                  </tr><tr>
                          <th> </th><th>405</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>406</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>407</th><td class="r"><ins>#!/usr/bin/env python</ins> </td>
                  </tr><tr>
                          <th> </th><th>408</th><td class="r"><ins>import os</ins> </td>
                  </tr><tr>
                          <th> </th><th>409</th><td class="r"><ins>sockaddr = '/home/trac/run/instance.sock'</ins> </td>
                  </tr><tr>
                          <th> </th><th>410</th><td class="r"><ins>os.environ['TRAC_ENV'] = '/home/trac/instance'</ins> </td>
                  </tr><tr>
                          <th> </th><th>411</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>412</th><td class="r"><ins>try:</ins> </td>
                  </tr><tr>
                          <th> </th><th>413</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;from trac.web.main import dispatch_request</ins> </td>
                  </tr><tr>
                          <th> </th><th>414</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;import trac.web._fcgi</ins> </td>
                  </tr><tr>
                          <th> </th><th>415</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>416</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;fcgiserv = trac.web._fcgi.WSGIServer(dispatch_request, </ins> </td>
                  </tr><tr>
                          <th> </th><th>417</th><td class="r"><ins>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bindAddress = sockaddr, umask = 7)</ins> </td>
                  </tr><tr>
                          <th> </th><th>418</th><td class="r"><ins>&nbsp; &nbsp; &nbsp;fcgiserv.run()</ins> </td>
                  </tr><tr>
                          <th> </th><th>419</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>420</th><td class="r"><ins>except SystemExit:</ins> </td>
                  </tr><tr>
                          <th> </th><th>421</th><td class="r"><ins>&nbsp; &nbsp; raise</ins> </td>
                  </tr><tr>
                          <th> </th><th>422</th><td class="r"><ins>except Exception, e:</ins> </td>
                  </tr><tr>
                          <th> </th><th>423</th><td class="r"><ins>&nbsp; &nbsp; print 'Content-Type: text/plain\r\n\r\n',</ins> </td>
                  </tr><tr>
                          <th> </th><th>424</th><td class="r"><ins>&nbsp; &nbsp; print 'Oops...'</ins> </td>
                  </tr><tr>
                          <th> </th><th>425</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>426</th><td class="r"><ins>&nbsp; &nbsp; print 'Trac detected an internal error:'</ins> </td>
                  </tr><tr>
                          <th> </th><th>427</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>428</th><td class="r"><ins>&nbsp; &nbsp; print e</ins> </td>
                  </tr><tr>
                          <th> </th><th>429</th><td class="r"><ins>&nbsp; &nbsp; print</ins> </td>
                  </tr><tr>
                          <th> </th><th>430</th><td class="r"><ins>&nbsp; &nbsp; import traceback</ins> </td>
                  </tr><tr>
                          <th> </th><th>431</th><td class="r"><ins>&nbsp; &nbsp; import StringIO</ins> </td>
                  </tr><tr>
                          <th> </th><th>432</th><td class="r"><ins>&nbsp; &nbsp; tb = StringIO.StringIO()</ins> </td>
                  </tr><tr>
                          <th> </th><th>433</th><td class="r"><ins>&nbsp; &nbsp; traceback.print_exc(file=tb)</ins> </td>
                  </tr><tr>
                          <th> </th><th>434</th><td class="r"><ins>&nbsp; &nbsp; print tb.getvalue()</ins> </td>
                  </tr><tr>
                          <th> </th><th>435</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>436</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>437</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>438</th><td class="r"><ins>3) reload nginx and launch trac.fcgi like that:</ins> </td>
                  </tr><tr>
                          <th> </th><th>439</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>440</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>441</th><td class="r"><ins>trac@trac.example ~ $ ./trac-standalone-fcgi.py </ins> </td>
                  </tr><tr>
                          <th> </th><th>442</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>443</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>444</th><td class="r"><ins>The above assumes that:</ins> </td>
                  </tr><tr>
                          <th> </th><th>445</th><td class="r"><ins>&nbsp;* There is a user named 'trac' for running trac instances and keeping trac environments in its home directory.</ins> </td>
                  </tr><tr>
                          <th> </th><th>446</th><td class="r"><ins>&nbsp;* /home/trac/instance contains a trac environment</ins> </td>
                  </tr><tr>
                          <th> </th><th>447</th><td class="r"><ins>&nbsp;* /home/trac/htpasswd contains authentication information</ins> </td>
                  </tr><tr>
                          <th> </th><th>448</th><td class="r"><ins>&nbsp;* /home/trac/run is owned by the same group the nginx runs under</ins> </td>
                  </tr><tr>
                          <th> </th><th>449</th><td class="r"><ins>&nbsp; * and if your system is Linux the /home/trac/run has setgid bit set (chmod g+s run)</ins> </td>
                  </tr><tr>
                          <th> </th><th>450</th><td class="r"><ins>&nbsp; * and patch from ticket #T7239 is applied, or you'll have to fix the socket file permissions every time</ins> </td>
                  </tr><tr>
                          <th> </th><th>451</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>452</th><td class="r"><ins>Unfortunately nginx does not support variable expansion in fastcgi_pass directive. </ins> </td>
                  </tr><tr>
                          <th> </th><th>453</th><td class="r"><ins>Thus it is not possible to serve multiple trac instances from one server block. </ins> </td>
                  </tr><tr>
                          <th> </th><th>454</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>455</th><td class="r"><ins>If you worry enough about security, run trac instances under separate users. </ins> </td>
                  </tr><tr>
                          <th> </th><th>456</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>457</th><td class="r"><ins>Another way to run trac as a FCGI external application is offered in ticket #T6224</ins> </td>
                  </tr><tr>
                          <th> </th><th>458</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>459</th><td class="r"><ins>----</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>460</th><td class="r"><ins>See also:&nbsp; TracGuide, TracInstall, [wiki:TracModWSGI ModWSGI], [wiki:TracCgi CGI], [wiki:TracModPython ModPython], [trac:TracNginxRecipe TracNginxRecipe]</ins> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about"><strong>Trac 0.11.6</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
