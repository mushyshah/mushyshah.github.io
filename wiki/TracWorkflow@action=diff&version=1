<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  

  <head>
    <title>
      TracWorkflow (diff) – Aquarius
    </title>
        <link rel="search" href="http://brown.caslab.queensu.ca/web/Aquarius/search" />
        <link rel="help" href="TracGuide" />
        <link rel="up" href="TracWorkflow@action=history" title="Page history" />
        <link rel="start" href="../wiki.1" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/css/diff.css" type="text/css" />
        <link rel="shortcut icon" href="../chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="../chrome/common/trac.ico" type="image/x-icon" />
    <script type="text/javascript" src="../chrome/common/js/jquery.js"></script><script type="text/javascript" src="../chrome/common/js/trac.js"></script><script type="text/javascript" src="../chrome/common/js/search.js"></script><script type="text/javascript" src="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/js/diff.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/web/Aquarius/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="http://brown.caslab.queensu.ca/web/Aquarius/chrome/common/css/diff.css" /><meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://research.cs.queensu.ca/home/cisc320/"><img src="http://research.cs.queensu.ca/home/cisc320/Winter2014/cisc320.jpg" alt="(please configure the [header_logo] section in trac.ini)" height="50" /></a>
      </div>
      <form id="search" action="http://brown.caslab.queensu.ca/web/Aquarius/search" method="get">
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="../login">Login</a></li><li><a href="../prefs">Preferences</a></li><li><a href="TracGuide">Help/Guide</a></li><li class="last"><a href="../about">About Trac</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="last first active"><a href="../wiki.1">Wiki</a></li>
    </ul>
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
          <ul>
              <li class="first"><span class="missing">&larr; Previous Change</span></li><li><a href="TracWorkflow@action=history" title="Page history">Wiki History</a></li><li class="last"><span class="missing">Next Change &rarr;</span></li>
          </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <h1>Changes
        between
          <a href="http://brown.caslab.queensu.ca/web/Aquarius/wiki/TracWorkflow?version=0">Initial Version</a> and
        <a href="TracWorkflow@version=1">Version 1</a> of
        <a href="TracWorkflow@version=1">TracWorkflow</a>
      </h1>
      <form method="post" id="prefs" action="TracWorkflow@version=1"><div><input type="hidden" name="__FORM_TOKEN" value="ded2e27addbac7ad9541ebef" /></div>
        <div>
          <input type="hidden" name="action" value="diff" />
          <input type="hidden" name="version" value="1" />
          <input type="hidden" name="old_version" value="0" />
    <label for="style">View differences</label>
    <select id="style" name="style">
      <option selected="selected" value="inline">inline</option>
      <option value="sidebyside">side by side</option>
    </select>
    <div class="field">
      Show <input type="text" name="contextlines" id="contextlines" size="2" maxlength="3" value="2" />
      <label for="contextlines">lines around each change</label>
    </div>
    <fieldset id="ignore">
      <legend>Ignore:</legend>
      <div class="field">
        <input type="checkbox" id="ignoreblanklines" name="ignoreblanklines" />
        <label for="ignoreblanklines">Blank lines</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorecase" name="ignorecase" />
        <label for="ignorecase">Case changes</label>
      </div>
      <div class="field">
        <input type="checkbox" id="ignorewhitespace" name="ignorewhitespace" />
        <label for="ignorewhitespace">White space changes</label>
      </div>
    </fieldset>
    <div class="buttons">
      <input type="submit" name="update" value="Update" />
    </div>
        </div>
      </form>
      <dl id="overview">
        <dt class="property time">Timestamp:</dt>
        <dd class="time">
          01/18/14 16:58:15 (<a class="timeline" href="http://brown.caslab.queensu.ca/web/Aquarius/timeline?from=2014-01-18T16%3A58%3A15-0500&amp;precision=second" title="2014-01-18T16:58:15-0500 in Timeline">4 months</a> ago)
        </dd>
        <dt class="property author">Author:</dt>
        <dd class="author">
          trac
        </dd>
        <dt class="property message">Comment:</dt>
        <dd class="message">
          
          <p>
--
</p>

        </dd>
      </dl>
      <div class="diff">
        <div class="legend" id="diff-legend">
          <h3>Legend:</h3>
          <dl>
            <dt class="unmod"></dt><dd>Unmodified</dd>
            <dt class="add"></dt><dd>Added</dd>
            <dt class="rem"></dt><dd>Removed</dd>
            <dt class="mod"></dt><dd>Modified</dd>
          </dl>
        </div>
        <div class="diff">
  <ul class="entries">
      <li class="entry">
        <h2 id="file0">
          <a href="TracWorkflow@version=1">TracWorkflow</a>
        </h2>
        <table class="inline" summary="Differences" cellspacing="0">
              <colgroup><col class="lineno" /><col class="lineno" /><col class="content" /></colgroup>
              <thead>
                <tr>
                  <th title="Version currently edited">
                    <a href="TracWorkflow@action=diff&amp;version=1#L1">
                      v1</a>
                  </th>
                  <th title="Version 1">
                    <a href="TracWorkflow@version=1#L1">
                      v1</a>
                  </th>
                  <th> </th>
                </tr>
              </thead>
            <tbody class="add">
                  <tr class="first">
                          <th> </th><th>1</th><td class="r"><ins>= The Trac Ticket Workflow System =</ins> </td>
                  </tr><tr>
                          <th> </th><th>2</th><td class="r"><ins>[[TracGuideToc]]</ins> </td>
                  </tr><tr>
                          <th> </th><th>3</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>4</th><td class="r"><ins>The Trac issue database provides a configurable workflow.</ins> </td>
                  </tr><tr>
                          <th> </th><th>5</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>6</th><td class="r"><ins>== The Default Ticket Workflow ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>7</th><td class="r"><ins>=== Environments upgraded from 0.10 ===</ins> </td>
                  </tr><tr>
                          <th> </th><th>8</th><td class="r"><ins>When you run `trac-admin &lt;env&gt; upgrade`, your `trac.ini` will be modified to include a `[ticket-workflow]` section.</ins> </td>
                  </tr><tr>
                          <th> </th><th>9</th><td class="r"><ins>The workflow configured in this case is the original workflow, so that ticket actions will behave like they did in 0.10.</ins> </td>
                  </tr><tr>
                          <th> </th><th>10</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>11</th><td class="r"><ins>Graphically, that looks like this:</ins> </td>
                  </tr><tr>
                          <th> </th><th>12</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>13</th><td class="r"><ins>[[Image(htdocs:../common/guide/original-workflow.png)]]</ins> </td>
                  </tr><tr>
                          <th> </th><th>14</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>15</th><td class="r"><ins>There are some significant "warts" in this; such as accepting a ticket sets it to 'assigned' state, and assigning a ticket sets it to 'new' state.&nbsp; Perfectly obvious, right?</ins> </td>
                  </tr><tr>
                          <th> </th><th>16</th><td class="r"><ins>So you will probably want to migrate to "basic" workflow; [trac:source:trunk/contrib/workflow/migrate_original_to_basic.py contrib/workflow/migrate_original_to_basic.py] may be helpful.</ins> </td>
                  </tr><tr>
                          <th> </th><th>17</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>18</th><td class="r"><ins>=== Environments created with 0.11 ===</ins> </td>
                  </tr><tr>
                          <th> </th><th>19</th><td class="r"><ins>When a new environment is created, a default workflow is configured in your trac.ini.&nbsp; This workflow is the basic workflow (described in `basic-workflow.ini`), which is somewhat different from the workflow of the 0.10 releases.</ins> </td>
                  </tr><tr>
                          <th> </th><th>20</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>21</th><td class="r"><ins>Graphically, it looks like this:</ins> </td>
                  </tr><tr>
                          <th> </th><th>22</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>23</th><td class="r"><ins>[[Image(htdocs:../common/guide/basic-workflow.png)]]</ins> </td>
                  </tr><tr>
                          <th> </th><th>24</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>25</th><td class="r"><ins>== Additional Ticket Workflows ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>26</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>27</th><td class="r"><ins>There are several example workflows provided in the Trac source tree; look in [trac:source:trunk/contrib/workflow contrib/workflow] for `.ini` config sections.&nbsp; One of those may be a good match for what you want. They can be pasted into the `[ticket-workflow]` section of your `trac.ini` file. However if you have existing tickets then there may be issues if those tickets have states that are not in the new workflow. </ins> </td>
                  </tr><tr>
                          <th> </th><th>28</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>29</th><td class="r"><ins>Here are some [http://trac.edgewall.org/wiki/WorkFlow/Examples diagrams] of the above examples.</ins> </td>
                  </tr><tr>
                          <th> </th><th>30</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>31</th><td class="r"><ins>== Basic Ticket Workflow Customization ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>32</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>33</th><td class="r"><ins>Note: Ticket "statuses" or "states" are not separately defined. The states a ticket can be in are automatically generated by the transitions defined in a workflow. Therefore, creating a new ticket state simply requires defining a state transition in the workflow that starts or ends with that state.</ins> </td>
                  </tr><tr>
                          <th> </th><th>34</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>35</th><td class="r"><ins>Create a `[ticket-workflow]` section in `trac.ini`.</ins> </td>
                  </tr><tr>
                          <th> </th><th>36</th><td class="r"><ins>Within this section, each entry is an action that may be taken on a ticket. </ins> </td>
                  </tr><tr>
                          <th> </th><th>37</th><td class="r"><ins>For example, consider the `accept` action from `simple-workflow.ini`:</ins> </td>
                  </tr><tr>
                          <th> </th><th>38</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>39</th><td class="r"><ins>accept = new,accepted -&gt; accepted</ins> </td>
                  </tr><tr>
                          <th> </th><th>40</th><td class="r"><ins>accept.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>41</th><td class="r"><ins>accept.operations = set_owner_to_self</ins> </td>
                  </tr><tr>
                          <th> </th><th>42</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>43</th><td class="r"><ins>The first line in this example defines the `accept` action, along with the states the action is valid in (`new` and `accepted`), and the new state of the ticket when the action is taken (`accepted`).</ins> </td>
                  </tr><tr>
                          <th> </th><th>44</th><td class="r"><ins>The `accept.permissions` line specifies what permissions the user must have to use this action.</ins> </td>
                  </tr><tr>
                          <th> </th><th>45</th><td class="r"><ins>The `accept.operations` line specifies changes that will be made to the ticket in addition to the status change when this action is taken.&nbsp; In this case, when a user clicks on `accept`, the ticket owner field is updated to the logged in user.&nbsp; Multiple operations may be specified in a comma separated list.</ins> </td>
                  </tr><tr>
                          <th> </th><th>46</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>47</th><td class="r"><ins>The available operations are:</ins> </td>
                  </tr><tr>
                          <th> </th><th>48</th><td class="r"><ins>&nbsp;- del_owner -- Clear the owner field.</ins> </td>
                  </tr><tr>
                          <th> </th><th>49</th><td class="r"><ins>&nbsp;- set_owner -- Sets the owner to the selected or entered owner.</ins> </td>
                  </tr><tr>
                          <th> </th><th>50</th><td class="r"><ins>&nbsp; &nbsp;- ''actionname''`.set_owner` may optionally be set to a comma delimited list or a single value.</ins> </td>
                  </tr><tr>
                          <th> </th><th>51</th><td class="r"><ins>&nbsp;- set_owner_to_self -- Sets the owner to the logged in user.</ins> </td>
                  </tr><tr>
                          <th> </th><th>52</th><td class="r"><ins>&nbsp;- del_resolution -- Clears the resolution field</ins> </td>
                  </tr><tr>
                          <th> </th><th>53</th><td class="r"><ins>&nbsp;- set_resolution -- Sets the resolution to the selected value.</ins> </td>
                  </tr><tr>
                          <th> </th><th>54</th><td class="r"><ins>&nbsp; &nbsp;- ''actionname''`.set_resolution` may optionally be set to a comma delimited list or a single value.</ins> </td>
                  </tr><tr>
                          <th> </th><th>55</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>56</th><td class="r"><ins>Example:</ins> </td>
                  </tr><tr>
                          <th> </th><th>57</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>58</th><td class="r"><ins>resolve_new = new -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>59</th><td class="r"><ins>resolve_new.name = resolve</ins> </td>
                  </tr><tr>
                          <th> </th><th>60</th><td class="r"><ins>resolve_new.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>61</th><td class="r"><ins>resolve_new.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>62</th><td class="r"><ins>resolve_new.set_resolution = invalid,wontfix</ins> </td>
                  </tr><tr>
                          <th> </th><th>63</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>64</th><td class="r"><ins>&nbsp;- leave_status -- Displays "leave as &lt;current status&gt;" and makes no change to the ticket.</ins> </td>
                  </tr><tr>
                          <th> </th><th>65</th><td class="r"><ins>'''Note:''' Specifying conflicting operations (such as `set_owner` and `del_owner`) has unspecified results.</ins> </td>
                  </tr><tr>
                          <th> </th><th>66</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>67</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>68</th><td class="r"><ins>resolve_accepted = accepted -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>69</th><td class="r"><ins>resolve_accepted.name = resolve</ins> </td>
                  </tr><tr>
                          <th> </th><th>70</th><td class="r"><ins>resolve_accepted.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>71</th><td class="r"><ins>resolve_accepted.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>72</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>73</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>74</th><td class="r"><ins>In this example, we see the `.name` attribute used.&nbsp; The action here is `resolve_accepted`, but it will be presented to the user as `resolve`.</ins> </td>
                  </tr><tr>
                          <th> </th><th>75</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>76</th><td class="r"><ins>For actions that should be available in all states, `*` may be used in place of the state.&nbsp; The obvious example is the `leave` action:</ins> </td>
                  </tr><tr>
                          <th> </th><th>77</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>78</th><td class="r"><ins>leave = * -&gt; *</ins> </td>
                  </tr><tr>
                          <th> </th><th>79</th><td class="r"><ins>leave.operations = leave_status</ins> </td>
                  </tr><tr>
                          <th> </th><th>80</th><td class="r"><ins>leave.default = 1</ins> </td>
                  </tr><tr>
                          <th> </th><th>81</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>82</th><td class="r"><ins>This also shows the use of the `.default` attribute.&nbsp; This value is expected to be an integer, and the order in which the actions are displayed is determined by this value.&nbsp; The action with the highest `.default` value is listed first, and is selected by default.&nbsp; The rest of the actions are listed in order of decreasing `.default` values.</ins> </td>
                  </tr><tr>
                          <th> </th><th>83</th><td class="r"><ins>If not specified for an action, `.default` is 0.&nbsp; The value may be negative.</ins> </td>
                  </tr><tr>
                          <th> </th><th>84</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>85</th><td class="r"><ins>There are a couple of hard-coded constraints to the workflow.&nbsp; In particular, tickets are created with status `new`, and tickets are expected to have a `closed` state.&nbsp; Further, the default reports/queries treat any state other than `closed` as an open state.</ins> </td>
                  </tr><tr>
                          <th> </th><th>86</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>87</th><td class="r"><ins>While creating or modifying a ticket workfow, `contrib/workflow/workflow_parser.py` may be useful.&nbsp; It can create `.dot` files that [http://www.graphviz.org GraphViz] understands to provide a visual description of the workflow.</ins> </td>
                  </tr><tr>
                          <th> </th><th>88</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>89</th><td class="r"><ins>This can be done as follows (your install path may be different).</ins> </td>
                  </tr><tr>
                          <th> </th><th>90</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>91</th><td class="r"><ins>cd /var/local/trac_devel/contrib/workflow/</ins> </td>
                  </tr><tr>
                          <th> </th><th>92</th><td class="r"><ins>sudo ./showworkflow /srv/trac/PlannerSuite/conf/trac.ini</ins> </td>
                  </tr><tr>
                          <th> </th><th>93</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>94</th><td class="r"><ins>And then open up the resulting `trac.pdf` file created by the script (it will be in the same directory as the `trac.ini` file).</ins> </td>
                  </tr><tr>
                          <th> </th><th>95</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>96</th><td class="r"><ins>An online copy of the workflow parser is available at http://foss.wush.net/cgi-bin/visual-workflow.pl</ins> </td>
                  </tr><tr>
                          <th> </th><th>97</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>98</th><td class="r"><ins>After you have changed a workflow, you need to restart apache for the changes to take effect. This is important, because the changes will still show up when you run your script, but all the old workflow steps will still be there until the server is restarted.</ins> </td>
                  </tr><tr>
                          <th> </th><th>99</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>100</th><td class="r"><ins>== Example: Adding optional Testing with Workflow ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>101</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>102</th><td class="r"><ins>By adding the following to your [ticket-workflow] section of trac.ini you get optional testing.&nbsp; When the ticket is in new, accepted or needs_work status you can choose to submit it for testing.&nbsp; When it's in the testing status the user gets the option to reject it and send it back to needs_work, or pass the testing and send it along to closed.&nbsp; If they accept it then it gets automatically marked as closed and the resolution is set to fixed.&nbsp; Since all the old work flow remains, a ticket can skip this entire section.</ins> </td>
                  </tr><tr>
                          <th> </th><th>103</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>104</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>105</th><td class="r"><ins>testing = new,accepted,needs_work,assigned,reopened -&gt; testing</ins> </td>
                  </tr><tr>
                          <th> </th><th>106</th><td class="r"><ins>testing.name = Submit to reporter for testing</ins> </td>
                  </tr><tr>
                          <th> </th><th>107</th><td class="r"><ins>testing.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>108</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>109</th><td class="r"><ins>reject = testing -&gt; needs_work</ins> </td>
                  </tr><tr>
                          <th> </th><th>110</th><td class="r"><ins>reject.name = Failed testing, return to developer</ins> </td>
                  </tr><tr>
                          <th> </th><th>111</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>112</th><td class="r"><ins>pass = testing -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>113</th><td class="r"><ins>pass.name = Passes Testing</ins> </td>
                  </tr><tr>
                          <th> </th><th>114</th><td class="r"><ins>pass.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>115</th><td class="r"><ins>pass.set_resolution = fixed</ins> </td>
                  </tr><tr>
                          <th> </th><th>116</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>117</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>118</th><td class="r"><ins>== Example: Add simple optional generic review state ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>119</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>120</th><td class="r"><ins>Sometimes Trac is used in situations where "testing" can mean different things to different people so you may want to create an optional workflow state that is between the default workflow's `assigned` and `closed` states, but does not impose implementation-specific details. The only new state you need to add for this is a `reviewing` state. A ticket may then be "submitted for review" from any state that it can be reassigned. If a review passes, you can re-use the `resolve` action to close the ticket, and if it fails you can re-use the `reassign` action to push it back into the normal workflow.</ins> </td>
                  </tr><tr>
                          <th> </th><th>121</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>122</th><td class="r"><ins>The new `reviewing` state along with its associated `review` action looks like this:</ins> </td>
                  </tr><tr>
                          <th> </th><th>123</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>124</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>125</th><td class="r"><ins>review = new,assigned,reopened -&gt; reviewing</ins> </td>
                  </tr><tr>
                          <th> </th><th>126</th><td class="r"><ins>review.operations = set_owner</ins> </td>
                  </tr><tr>
                          <th> </th><th>127</th><td class="r"><ins>review.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>128</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>129</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>130</th><td class="r"><ins>Then, to integrate this with the default Trac 0.11 workflow, you also need to add the `reviewing` state to the `accept` and `resolve` actions, like so:</ins> </td>
                  </tr><tr>
                          <th> </th><th>131</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>132</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>133</th><td class="r"><ins>accept = new,reviewing -&gt; assigned</ins> </td>
                  </tr><tr>
                          <th> </th><th>134</th><td class="r"><ins>[…]</ins> </td>
                  </tr><tr>
                          <th> </th><th>135</th><td class="r"><ins>resolve = new,assigned,reopened,reviewing -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>136</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>137</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>138</th><td class="r"><ins>Optionally, you can also add a new action that allows you to change the ticket's owner without moving the ticket out of the `reviewing` state. This enables you to reassign review work without pushing the ticket back to the `new` status.</ins> </td>
                  </tr><tr>
                          <th> </th><th>139</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>140</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>141</th><td class="r"><ins>reassign_reviewing = reviewing -&gt; *</ins> </td>
                  </tr><tr>
                          <th> </th><th>142</th><td class="r"><ins>reassign_reviewing.name = reassign review</ins> </td>
                  </tr><tr>
                          <th> </th><th>143</th><td class="r"><ins>reassign_reviewing.operations = set_owner</ins> </td>
                  </tr><tr>
                          <th> </th><th>144</th><td class="r"><ins>reassign_reviewing.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>145</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>146</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>147</th><td class="r"><ins>The full `[ticket-workflow]` configuration will thus look like this:</ins> </td>
                  </tr><tr>
                          <th> </th><th>148</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>149</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>150</th><td class="r"><ins>[ticket-workflow]</ins> </td>
                  </tr><tr>
                          <th> </th><th>151</th><td class="r"><ins>accept = new,reviewing -&gt; assigned</ins> </td>
                  </tr><tr>
                          <th> </th><th>152</th><td class="r"><ins>accept.operations = set_owner_to_self</ins> </td>
                  </tr><tr>
                          <th> </th><th>153</th><td class="r"><ins>accept.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>154</th><td class="r"><ins>leave = * -&gt; *</ins> </td>
                  </tr><tr>
                          <th> </th><th>155</th><td class="r"><ins>leave.default = 1</ins> </td>
                  </tr><tr>
                          <th> </th><th>156</th><td class="r"><ins>leave.operations = leave_status</ins> </td>
                  </tr><tr>
                          <th> </th><th>157</th><td class="r"><ins>reassign = new,assigned,reopened -&gt; new</ins> </td>
                  </tr><tr>
                          <th> </th><th>158</th><td class="r"><ins>reassign.operations = set_owner</ins> </td>
                  </tr><tr>
                          <th> </th><th>159</th><td class="r"><ins>reassign.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>160</th><td class="r"><ins>reopen = closed -&gt; reopened</ins> </td>
                  </tr><tr>
                          <th> </th><th>161</th><td class="r"><ins>reopen.operations = del_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>162</th><td class="r"><ins>reopen.permissions = TICKET_CREATE</ins> </td>
                  </tr><tr>
                          <th> </th><th>163</th><td class="r"><ins>resolve = new,assigned,reopened,reviewing -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>164</th><td class="r"><ins>resolve.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>165</th><td class="r"><ins>resolve.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>166</th><td class="r"><ins>review = new,assigned,reopened -&gt; reviewing</ins> </td>
                  </tr><tr>
                          <th> </th><th>167</th><td class="r"><ins>review.operations = set_owner</ins> </td>
                  </tr><tr>
                          <th> </th><th>168</th><td class="r"><ins>review.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>169</th><td class="r"><ins>reassign_reviewing = reviewing -&gt; *</ins> </td>
                  </tr><tr>
                          <th> </th><th>170</th><td class="r"><ins>reassign_reviewing.operations = set_owner</ins> </td>
                  </tr><tr>
                          <th> </th><th>171</th><td class="r"><ins>reassign_reviewing.name = reassign review</ins> </td>
                  </tr><tr>
                          <th> </th><th>172</th><td class="r"><ins>reassign_reviewing.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>173</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>174</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>175</th><td class="r"><ins>== Example: Limit the resolution options for a new ticket ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>176</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>177</th><td class="r"><ins>The above resolve_new operation allows you to set the possible resolutions for a new ticket.&nbsp; By modifying the existing resolve action and removing the new status from before the `-&gt;` we then get two resolve actions.&nbsp; One with limited resolutions for new tickets, and then the regular one once a ticket is accepted.</ins> </td>
                  </tr><tr>
                          <th> </th><th>178</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>179</th><td class="r"><ins>{{{</ins> </td>
                  </tr><tr>
                          <th> </th><th>180</th><td class="r"><ins>resolve_new = new -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>181</th><td class="r"><ins>resolve_new.name = resolve</ins> </td>
                  </tr><tr>
                          <th> </th><th>182</th><td class="r"><ins>resolve_new.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>183</th><td class="r"><ins>resolve_new.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>184</th><td class="r"><ins>resolve_new.set_resolution = invalid,wontfix,duplicate</ins> </td>
                  </tr><tr>
                          <th> </th><th>185</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>186</th><td class="r"><ins>resolve = assigned,accepted,reopened -&gt; closed</ins> </td>
                  </tr><tr>
                          <th> </th><th>187</th><td class="r"><ins>resolve.operations = set_resolution</ins> </td>
                  </tr><tr>
                          <th> </th><th>188</th><td class="r"><ins>resolve.permissions = TICKET_MODIFY</ins> </td>
                  </tr><tr>
                          <th> </th><th>189</th><td class="r"><ins>}}}</ins> </td>
                  </tr><tr>
                          <th> </th><th>190</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>191</th><td class="r"><ins>== Advanced Ticket Workflow Customization ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>192</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>193</th><td class="r"><ins>If the customization above is not extensive enough for your needs, you can extend the workflow using plugins.&nbsp; These plugins can provide additional operations for the workflow (like code_review), or implement side-effects for an action (such as triggering a build) that may not be merely simple state changes.&nbsp; Look at [trac:source:trunk/sample-plugins/workflow sample-plugins/workflow] for a few simple examples to get started.</ins> </td>
                  </tr><tr>
                          <th> </th><th>194</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>195</th><td class="r"><ins>But if even that is not enough, you can disable the !ConfigurableTicketWorkflow component and create a plugin that completely replaces it.</ins> </td>
                  </tr><tr>
                          <th> </th><th>196</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>197</th><td class="r"><ins>== Adding Workflow States to Milestone Progress Bars ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>198</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>199</th><td class="r"><ins>If you add additional states to your workflow, you may want to customize your milestone progress bars as well.&nbsp; See [TracIni#milestone-groups-section TracIni].</ins> </td>
                  </tr><tr>
                          <th> </th><th>200</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>201</th><td class="r"><ins>== some ideas for next steps ==</ins> </td>
                  </tr><tr>
                          <th> </th><th>202</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>203</th><td class="r"><ins>New enhancement ideas for the workflow system should be filed as enhancement tickets against the `ticket system` component.&nbsp; If desired, add a single-line link to that ticket here.&nbsp; Also look at the [th:wiki:AdvancedTicketWorkflowPlugin] as it provides experimental operations.</ins> </td>
                  </tr><tr>
                          <th> </th><th>204</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>205</th><td class="r"><ins>If you have a response to the comments below, create an enhancement ticket, and replace the description below with a link to the ticket.</ins> </td>
                  </tr><tr>
                          <th> </th><th>206</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>207</th><td class="r"><ins>&nbsp;* the "operation" could be on the nodes, possible operations are:</ins> </td>
                  </tr><tr>
                          <th> </th><th>208</th><td class="r"><ins>&nbsp; &nbsp;* '''preops''': automatic, before entering the state/activity</ins> </td>
                  </tr><tr>
                          <th> </th><th>209</th><td class="r"><ins>&nbsp; &nbsp;* '''postops''': automatic, when leaving the state/activity</ins> </td>
                  </tr><tr>
                          <th> </th><th>210</th><td class="r"><ins>&nbsp; &nbsp;* '''actions''': can be chosen by the owner in the list at the bottom, and/or drop-down/pop-up together with the default actions of leaving the node on one of the arrows.</ins> </td>
                  </tr><tr>
                          <th> </th><th>211</th><td class="r"><ins>''This appears to add complexity without adding functionality; please provide a detailed example where these additions allow something currently impossible to implement.''</ins> </td>
                  </tr><tr>
                          <th> </th><th>212</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>213</th><td class="r"><ins>&nbsp;* operations could be anything: sum up the time used for the activity, or just write some statistical fields like </ins> </td>
                  </tr><tr>
                          <th> </th><th>214</th><td class="r"><ins>''A workflow plugin can add an arbitrary workflow operation, so this is already possible.''</ins> </td>
                  </tr><tr>
                          <th> </th><th>215</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>216</th><td class="r"><ins>&nbsp;* set_actor should be an operation allowing to set the owner, e.g. as a "preop":</ins> </td>
                  </tr><tr>
                          <th> </th><th>217</th><td class="r"><ins>&nbsp; &nbsp;* either to a role, a person</ins> </td>
                  </tr><tr>
                          <th> </th><th>218</th><td class="r"><ins>&nbsp; &nbsp;* entered fix at define time, or at run time, e.g. out of a field, or select.</ins> </td>
                  </tr><tr>
                          <th> </th><th>219</th><td class="r"><ins>''This is either duplicating the existing `set_owner` operation, or needs to be clarified.''</ins> </td>
                  </tr><tr>
                          <th> </th><th>220</th><td class="r"><ins></ins> </td>
                  </tr><tr>
                          <th> </th><th>221</th><td class="r"><ins>&nbsp;* Actions should be selectable based on the ticket type (different Workflows for different tickets)</ins> </td>
                  </tr><tr class="last">
                          <th> </th><th>222</th><td class="r"><ins>''Look into the [th:wiki:AdvancedTicketWorkflowPlugin]'s `triage` operation.''</ins> </td>
                  </tr>
            </tbody>
        </table>
      </li>
  </ul>
</div>
      </div>
  </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">
        Powered by <a href="../about"><strong>Trac 0.11.6</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.
      </p>
      <p class="right">Visit the Trac open source project at<br /><a href="http://trac.edgewall.org/">http://trac.edgewall.org/</a></p>
    </div>
  </body>
</html>
